{"title":"Windows上安装pycocotools报错","date":"2020-01-06T17:23:00.000Z","thumbnail":"windows-pycocotools/coco-logo.png","link":"windows-pycocotools","comments":true,"tags":["error","python"],"categories":["windows"],"updated":"2022-01-04T08:35:48.659Z","content":"<p>本文记录Windows上pip安装pycocotools是遇到的问题及解决办法。</p>\n<a id=\"more\"></a>\n\n<h2 id=\"问题\">问题<a href=\"windows-pycocotools#问题\"></a></h2><p>常规安装操作为</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install cython</span><br><span class=\"line\">pip install git+https://github.com/cocodataset/cocoapi.git#subdirectory=PythonAPI</span><br></pre></td></tr></table></div></figure>\n\n<p>但是安装失败，出现错误信息：</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cl: 命令行 error D8021 :无效的数值参数 &quot;/Wno-cpp&quot;</span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"解决办法\">解决办法<a href=\"windows-pycocotools#解决办法\"></a></h2><ol>\n<li><p>从<a href=\"https://github.com/cocodataset/cocoapi\" target=\"_blank\" rel=\"noopener\">官方github仓库</a>下载源码</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/cocodataset/cocoapi.git</span><br></pre></td></tr></table></div></figure>\n</li>\n<li><p>修改安装程序源码  <code>cocoapi/PythonAPI/setup.py</code></p>\n<p>删除第12行的 <code>-Wno-cpp</code> 和 <code>-Wno-unused-function</code> 两个参数。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ext_modules = [</span><br><span class=\"line\">    Extension(</span><br><span class=\"line\">        &apos;pycocotools._mask&apos;,</span><br><span class=\"line\">        sources=[&apos;../common/maskApi.c&apos;, &apos;pycocotools/_mask.pyx&apos;],</span><br><span class=\"line\">        include_dirs = [np.get_include(), &apos;../common&apos;],</span><br><span class=\"line\">        extra_compile_args=[&apos;-Wno-cpp&apos;, &apos;-Wno-unused-function&apos;, &apos;-std=c99&apos;],</span><br><span class=\"line\">    )</span><br><span class=\"line\">]</span><br></pre></td></tr></table></div></figure>\n</li>\n<li><p>保存后开始安装</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd cocoapi/PythonAPI</span><br><span class=\"line\">python setup.py install</span><br></pre></td></tr></table></div></figure>\n\n</li>\n</ol>\n","prev":{"title":"COCO数据集格式","link":"coco-dataset-format"},"next":{"title":"Windows上vim的安装与配置","link":"vim-for-windows"},"plink":"https://yuxinzhao.net/windows-pycocotools/","toc":[{"title":"问题","id":"问题","index":"1"},{"title":"解决办法","id":"解决办法","index":"2"}],"reward":true,"copyright":{"author":"Yuxin Zhao","link":"<a href=\"https://yuxinzhao.net/windows-pycocotools/\" title=\"Windows上安装pycocotools报错\">https://yuxinzhao.net/windows-pycocotools/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}