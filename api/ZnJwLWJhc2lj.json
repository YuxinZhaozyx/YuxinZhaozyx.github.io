{"title":"frp内网穿透基本使用","date":"2020-01-17T21:06:04.000Z","thumbnail":"frp-basic/architecture.png","link":"frp-basic","comments":true,"tags":["frp"],"categories":["tools"],"updated":"2022-01-04T08:35:48.591Z","content":"<p>每次回家连不上学校内网，就没法连接实验室的服务器做实验，有什么办法解决呢？内网穿透是解决这一问题的方法之一。</p>\n<p>本文介绍 frp 内网穿透工具的基础使用，仅涉及 frp 的 ssh 访问功能，更多功能见<a href=\"https://github.com/fatedier/frp\" target=\"_blank\" rel=\"noopener\">官方仓库</a>。</p>\n<a id=\"more\"></a>\n\n<h2 id=\"前提\">前提<a href=\"frp-basic#前提\"></a></h2><ul>\n<li>一台公网服务器（有公网ip）(没有怎么办？在腾讯云或者百度云上买学生服务器)</li>\n<li>一台内网服务器（实验室的服务器）</li>\n</ul>\n<h1 id=\"下载\">下载<a href=\"frp-basic#下载\"></a></h1><p>从<a href=\"https://github.com/fatedier/frp/releases\" target=\"_blank\" rel=\"noopener\">github仓库的release</a>中下载最新版本解压即可，公网服务器和内网服务器上都要下载。</p>\n<p>也可以用指令下载：</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://github.com/fatedier/frp/releases/download/v0.31.1/frp_0.31.1_linux_amd64.tar.gz</span><br><span class=\"line\">tar -zxvf frp_0.31.1_linux_amd64.tar.gz</span><br></pre></td></tr></table></div></figure>\n\n<h1 id=\"基础使用\">基础使用<a href=\"frp-basic#基础使用\"></a></h1><h2 id=\"公网服务器设置\">公网服务器设置<a href=\"frp-basic#公网服务器设置\"></a></h2><p>修改 <code>frps.ini</code> 文件。</p>\n<figure class=\"highlight\"><figcaption><span>frps.ini</span></figcaption><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">bind_port</span> = <span class=\"number\">7000</span></span><br></pre></td></tr></table></div></figure>\n\n<p>启动</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./frps -c frps.ini</span><br></pre></td></tr></table></div></figure>\n\n<p>若想后台运行该指令，详见文章 <a href=\"/linux-command-nohup\">Linux nohup 后台执行指令</a>。</p>\n<h2 id=\"内网服务器设置\">内网服务器设置<a href=\"frp-basic#内网服务器设置\"></a></h2><p>修改 <code>frpc.ini</code> 文件</p>\n<figure class=\"highlight\"><figcaption><span>frpc.ini</span></figcaption><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">server_addr</span> = x.x.x.x  <span class=\"comment\"># 你的公网服务器的ip</span></span><br><span class=\"line\"><span class=\"attr\">server_port</span> = <span class=\"number\">7000</span>     <span class=\"comment\"># 对应公网服务器上frps.ini里bind_port的端口</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ssh]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = tcp</span><br><span class=\"line\"><span class=\"attr\">local_ip</span> = <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">22</span></span><br><span class=\"line\"><span class=\"attr\">remote_port</span> = <span class=\"number\">6000</span>     <span class=\"comment\"># 之后访问ssh时使用的端口号</span></span><br></pre></td></tr></table></div></figure>\n\n<p>启动</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./frpc -c frpc.ini</span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"使用\">使用<a href=\"frp-basic#使用\"></a></h2><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -oPort=6000 username@x.x.x.x</span><br></pre></td></tr></table></div></figure>\n\n","prev":{"title":"linux上安装docker CE","link":"docker-linux-install"},"next":{"title":"Ubuntu上从CUDA开始构建深度学习镜像","link":"create-deep-learning-docker-image-in-ubuntu"},"plink":"https://yuxinzhao.net/frp-basic/","toc":[{"title":"下载","id":"下载","index":"1"},{"title":"基础使用","id":"基础使用","index":"2","children":[{"title":"公网服务器设置","id":"公网服务器设置","index":"2.1"},{"title":"内网服务器设置","id":"内网服务器设置","index":"2.2"},{"title":"使用","id":"使用","index":"2.3"}]}],"reward":true,"copyright":{"author":"Yuxin Zhao","link":"<a href=\"https://yuxinzhao.net/frp-basic/\" title=\"frp内网穿透基本使用\">https://yuxinzhao.net/frp-basic/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}