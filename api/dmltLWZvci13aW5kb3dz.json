{"title":"Windows上vim的安装与配置","date":"2020-01-06T14:29:15.000Z","thumbnail":"vim-for-windows/bg.jpg","link":"vim-for-windows","comments":true,"tags":["vim"],"categories":["windows"],"updated":"2022-01-04T08:35:48.655Z","content":"<p>本文对我在windows平台上安装和配置vim的过程中遇到的问题以及解决措施进行记录。</p>\n<a id=\"more\"></a>\n\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=\"330\" height=\"86\" src=\"//music.163.com/outchain/player?type=2&id=1310288821&auto=1&height=66\"></iframe>\n\n<h1 id=\"安装vim\">安装vim<a href=\"vim-for-windows#安装vim\"></a></h1><p>一开始我按照<a href=\"https://github.com/vim/vim\" target=\"_blank\" rel=\"noopener\">GitHub官方仓库vim/vim</a>上的官方教程，从<a href=\"https://www.vim.org/download.php\" target=\"_blank\" rel=\"noopener\">vim官网下载页面</a>下载并安装了vim，基本能够正常使用，但是在后续安装vim插件的过程中，发现官网编译的vim并不支持python，所有依赖于python的vim插件都无法正常使用。解决方法有二：</p>\n<ol>\n<li>使用第三方编译的版本</li>\n<li>将github repo的代码clone下来自己编译</li>\n</ol>\n<p>为了节省时间，我直接选择了直接使用第三方编译的版本，下载地址在<a href=\"https://tuxproject.de/projects/vim/\" target=\"_blank\" rel=\"noopener\">此处</a>。</p>\n<p>下载后在本地创建文件夹 <code>vim/vim82</code>，此处的<code>vim82</code>仅表示我安装的是vim8.2版本，将下载的压缩包的内容放在<code>vim82</code>内，确保能找到<code>vim/vim82/vim.exe</code>主程序。接下来将<code>vim/vim82</code>路径添加到环境变量中即可通过命令行指令使用vim了：</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim test.py</span><br></pre></td></tr></table></div></figure>\n\n<h1 id=\"配置vim\">配置vim<a href=\"vim-for-windows#配置vim\"></a></h1><p>vim的配置在unix下是通过<code>.vimrc</code>文件的进行，而在windows下是通过<code>_vimrc</code>文件。</p>\n<p>将 <code>vim/vim82/vimrc_example.vim</code> 复制到 <code>vim</code> 目录下并重命名为 <code>_vimrc</code>，即<code>vim/_vimrc</code>。</p>\n<h2 id=\"基本配置\">基本配置<a href=\"vim-for-windows#基本配置\"></a></h2><p>在 <code>vim/_vimrc</code> 文件末尾添加以下配置：</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set showcmd     &quot; 在右下角显示输入的命令</span><br><span class=\"line\">syntax on       &quot; 开启语法高亮</span><br><span class=\"line\">set number      &quot; 显示行号</span><br><span class=\"line\">set relativenumber  &quot; 显示相对行号</span><br><span class=\"line\">set wrap</span><br><span class=\"line\">set ruler</span><br><span class=\"line\">set incsearch   &quot; 使得在用/搜索时将匹配的位置实时显示出来</span><br><span class=\"line\">set showmatch</span><br><span class=\"line\">set autoindent  &quot; 自动缩进</span><br><span class=\"line\">set backspace=endofline,start,indent  &quot;使得backspace可以删除回车、换行及缩进</span><br><span class=\"line\">set encoding=utf-8</span><br><span class=\"line\">set nobackup    &quot; 不生成备份文件 *~</span><br><span class=\"line\">set nowritebackup</span><br><span class=\"line\">set noundofile  &quot; 撤销后不保留备份文件 *.un</span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"插件管理器-vim-plug\">插件管理器 vim-plug<a href=\"vim-for-windows#插件管理器-vim-plug\"></a></h2><p>按照 <a href=\"https://github.com/junegunn/vim-plug\" target=\"_blank\" rel=\"noopener\">github仓库 junegunn/vim-plug</a> 的教程安装vim。</p>\n<ol>\n<li><p>下载 <a href=\"https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\" target=\"_blank\" rel=\"noopener\"><code>plug.vim</code></a> 文件到 <code>vim/vim82/autoload</code> 文件夹下</p>\n</li>\n<li><p>新建 <code>vim/vim82/plugged</code> 文件夹</p>\n</li>\n<li><p>修改 <code>vim/_vimrc</code>，添加如下配置</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">call plug#begin(&apos;./vim82/plugged&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\">&quot; 中间放插件的安装指令，如</span><br><span class=\"line\">&quot; Plug &apos;preservim/nerdtree&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">call plug#end()</span><br><span class=\"line\"></span><br><span class=\"line\">&quot; 外面放插件的配置指令，如</span><br><span class=\"line\">&quot; map &lt;C-f&gt; :NERDTreeToggle&lt;CR&gt;</span><br></pre></td></tr></table></div></figure>\n\n</li>\n</ol>\n<p><strong>添加插件：</strong></p>\n<ol>\n<li>在 <code>vim/_vimrc</code> 中添加对应的插件地址，保存</li>\n<li>在vim中执行 <code>:PlugInstall</code> 安装插件，vim-plug 会到 github 上将对应插件的仓库克隆下来自动安装</li>\n<li>退出vim，重新进入即可</li>\n</ol>\n<h2 id=\"插件\">插件<a href=\"vim-for-windows#插件\"></a></h2><h3 id=\"vim-airline\">vim-airline<a href=\"vim-for-windows#vim-airline\"></a></h3><p>vim-airline 插件在底部增加一个状态栏，可以显示文件路径，文件编码，光标位置等信息</p>\n<p><strong>安装指令：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Plug &apos;vim-airline/vim-airline&apos;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"Ultisnips\">Ultisnips<a href=\"vim-for-windows#Ultisnips\"></a></h3><p>Ultisnips 插件可以通过 <kbd>Tab</kbd> 键触发预设的补全。</p>\n<p><strong>安装指令：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Plug &apos;SirVer/ultisnips&apos;</span><br><span class=\"line\">Plug &apos;honza/vim-snippets&apos;</span><br></pre></td></tr></table></div></figure>\n\n<p><strong>注意：</strong></p>\n<p>该插件依赖于python，要求本机已安装python，且对版本有要求，在<a href=\"https://tuxproject.de/projects/vim/\" target=\"_blank\" rel=\"noopener\">vim的下载页面</a> 找到编译vim使用的python版本，如3.8.1，在python官网下载对应版本的python安装，别忘了添加环境变量。</p>\n<h3 id=\"NERDTree\">NERDTree<a href=\"vim-for-windows#NERDTree\"></a></h3><p>NERDTree 插件允许呼出文件目录树，可以方便地在vim中查找目录，切换文件。</p>\n<p><strong>安装指令：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Plug &apos;preservim/nerdtree&apos;</span><br></pre></td></tr></table></div></figure>\n\n<p><strong>配置指令：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">map &lt;C-f&gt; :NERDTreeToggle&lt;CR&gt;</span><br></pre></td></tr></table></div></figure>\n\n<p>该配置指令将 <code>&lt;C-f&gt;</code> 即 <kbd>Ctrl</kbd> + <kbd>f</kbd> 映射到 <code>:NERDTreeToggle&lt;CR&gt;</code> 指令上。</p>\n<p><strong>使用：</strong></p>\n<ol>\n<li><p>按下 <kbd>Ctrl</kbd> + <kbd>f</kbd> 即可呼出/收回左侧栏的目录树</p>\n</li>\n<li><p>在打开左侧栏目录树的情况下，通过 <kbd>Ctrl</kbd> + <kbd>w</kbd> + <kbd>h</kbd> 和  <kbd>Ctrl</kbd> + <kbd>w</kbd> + <kbd>l</kbd> 可以在左右栏中移动</p>\n</li>\n<li><p>光标在左侧目录树的情况下，可以通过以下按键触发不同功能</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">?: 快速帮助文档</span><br><span class=\"line\">m: 修改文件（新建文件/移动文件/重命名文件/删除文件/复制文件）</span><br><span class=\"line\">o: 打开一个目录或者打开文件，创建的是buffer，也可以用来打开书签</span><br><span class=\"line\"><span class=\"keyword\">go</span>: 打开一个文件，但是光标仍然留在NERDTree，创建的是buffer</span><br><span class=\"line\">t: 打开一个文件，创建的是Tab，对书签同样生效</span><br><span class=\"line\">T: 打开一个文件，但是光标仍然留在NERDTree，创建的是Tab，对书签同样生效</span><br><span class=\"line\">i: 水平分割创建文件的窗口，创建的是buffer</span><br><span class=\"line\">gi: 水平分割创建文件的窗口，但是光标仍然留在NERDTree</span><br><span class=\"line\">s: 垂直分割创建文件的窗口，创建的是buffer</span><br><span class=\"line\">gs: 和gi，<span class=\"keyword\">go</span>类似</span><br><span class=\"line\">x: 收起当前打开的目录</span><br><span class=\"line\">X: 收起所有打开的目录</span><br><span class=\"line\">e: 以文件管理的方式打开选中的目录</span><br><span class=\"line\">D: 删除书签</span><br><span class=\"line\">P: 大写，跳转到当前根路径</span><br><span class=\"line\">p: 小写，跳转到光标所在的上一级路径</span><br><span class=\"line\">K: 跳转到第一个子路径</span><br><span class=\"line\">J: 跳转到最后一个子路径</span><br><span class=\"line\">&lt;C-j&gt;和&lt;C-k&gt;: 在同级目录和文件间移动，忽略子目录和子文件</span><br><span class=\"line\">C: 将根路径设置为光标所在的目录</span><br><span class=\"line\">u: 设置上级目录为根路径</span><br><span class=\"line\">U: 设置上级目录为跟路径，但是维持原来目录打开的状态</span><br><span class=\"line\">r: 刷新光标所在的目录</span><br><span class=\"line\">R: 刷新当前根路径</span><br><span class=\"line\">I: 显示或者不显示隐藏文件</span><br><span class=\"line\">f: 打开和关闭文件过滤器</span><br><span class=\"line\">q: 关闭NERDTree</span><br><span class=\"line\">A: 全屏显示NERDTree，或者关闭全屏</span><br></pre></td></tr></table></div></figure>\n\n</li>\n</ol>\n<h3 id=\"NERDCommender\">NERDCommender<a href=\"vim-for-windows#NERDCommender\"></a></h3><p>一个注释的辅助插件</p>\n<p><strong>安装指令：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Plug &apos;preservim/nerdcommenter&apos;</span><br></pre></td></tr></table></div></figure>\n\n<p><strong>使用：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;leader&gt;cc   加注释</span><br><span class=\"line\">&lt;leader&gt;cu   解开注释</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;leader&gt;c&lt;space&gt;  加上/解开注释, 智能判断</span><br><span class=\"line\">&lt;leader&gt;cy   先复制, 再注解(p可以进行黏贴)</span><br></pre></td></tr></table></div></figure>\n\n<p>默认情况下 <code>&lt;leader&gt;</code> 为 <kbd>\\</kbd> 键。</p>\n<h3 id=\"Auto-Pairs\">Auto Pairs<a href=\"vim-for-windows#Auto-Pairs\"></a></h3><p>autopairs 插件能够在输入左括号时自动添加右括号。</p>\n<p><strong>安装指令：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Plug &apos;jiangmiao/auto-pairs&apos;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"Markdown\">Markdown<a href=\"vim-for-windows#Markdown\"></a></h3><p>以下插件添加对markdown的支持</p>\n<p><strong>安装指令：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Plug &apos;godlygeek/tabular&apos;</span><br><span class=\"line\">Plug &apos;plasticboy/vim-markdown&apos;</span><br><span class=\"line\">Plug &apos;mzlogin/vim-markdown-toc&apos;</span><br><span class=\"line\">Plug &apos;iamcco/markdown-preview.nvim&apos;, &#123;&apos;do&apos;: &apos;cd app &amp; yarn install&apos;&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p><strong>配置指令：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let g:vim_markdown_folding_disabled = 1</span><br></pre></td></tr></table></div></figure>\n\n<p><strong>使用：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:MarkdownPreview      &quot; 打开预览</span><br><span class=\"line\">:MarkdownPreviewStop  &quot; 关闭预览</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"LeaderF\">LeaderF<a href=\"vim-for-windows#LeaderF\"></a></h3><p>LeaderF 提供模糊查找的功能</p>\n<p><strong>安装指令：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Plug &apos;Yggdroot/LeaderF&apos;, &#123;&apos;do&apos;: &apos;./install.bat&apos;&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p><strong>配置指令：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">map &lt;C-g&gt; :LeaderfFunction&lt;CR&gt;</span><br></pre></td></tr></table></div></figure>\n\n<p><strong>使用：</strong></p>\n<div class=\"article-bounded\"><div class=\"article-table\"><table>\n<thead>\n<tr>\n<th>快捷键</th>\n<th>指令</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>&lt;leader&gt;f</code></td>\n<td><code>:LeaderfFile</code></td>\n<td>搜索当前目录下的文件</td>\n</tr>\n<tr>\n<td><code>&lt;leader&gt;b</code></td>\n<td><code>:LeaderfBuffer</code></td>\n<td>搜索当前的Buffer中的文件</td>\n</tr>\n<tr>\n<td><code>&lt;leader&gt;g</code> (自行设置映射)</td>\n<td><code>:LeaderfFunction</code></td>\n<td>搜索当前文件的函数</td>\n</tr>\n</tbody></table></div></div>\n<p><strong>注意：</strong></p>\n<p>要使用 <code>:LeaderfFunction</code>  功能需要先安装 <a href=\"https://github.com/universal-ctags/ctags-win32/releases\" target=\"_blank\" rel=\"noopener\">ctags</a>，将压缩包下载后解压再添加到环境变量中即可。</p>\n","prev":{"title":"Windows上安装pycocotools报错","link":"windows-pycocotools"},"next":{"title":"使用UML顺序图表示物件交互及时序关系","link":"sequence-diagram"},"plink":"https://yuxinzhao.net/vim-for-windows/","toc":[{"title":"安装vim","id":"安装vim","index":"1"},{"title":"配置vim","id":"配置vim","index":"2","children":[{"title":"基本配置","id":"基本配置","index":"2.1"},{"title":"插件管理器 vim-plug","id":"插件管理器-vim-plug","index":"2.2"},{"title":"插件","id":"插件","index":"2.3","children":[{"title":"vim-airline","id":"vim-airline","index":"2.3.1"},{"title":"Ultisnips","id":"Ultisnips","index":"2.3.2"},{"title":"NERDTree","id":"NERDTree","index":"2.3.3"},{"title":"NERDCommender","id":"NERDCommender","index":"2.3.4"},{"title":"Auto Pairs","id":"Auto-Pairs","index":"2.3.5"},{"title":"Markdown","id":"Markdown","index":"2.3.6"},{"title":"LeaderF","id":"LeaderF","index":"2.3.7"}]}]}],"reward":true,"copyright":{"author":"Yuxin Zhao","link":"<a href=\"https://yuxinzhao.net/vim-for-windows/\" title=\"Windows上vim的安装与配置\">https://yuxinzhao.net/vim-for-windows/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}