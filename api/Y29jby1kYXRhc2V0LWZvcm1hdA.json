{"title":"COCO数据集格式","date":"2020-01-07T13:33:56.000Z","thumbnail":"coco-dataset-format/coco-logo.png","link":"coco-dataset-format","comments":true,"tags":["dataset"],"categories":["machine-learning"],"updated":"2022-01-04T08:35:48.547Z","content":"<p>本文介绍COCO数据集的标注格式。</p>\n<p>COCO 全称为Common Objects in Context，是微软团队提供的一个可以用来进行图像识别的数据集。</p>\n<p>COCO数据集目前有3种标注类型：</p>\n<ul>\n<li>object instances (目标实例)</li>\n<li>object keypoints (目标上的关键点)</li>\n<li>image captions (看图说话)</li>\n</ul>\n<p>COCO 数据集的信息采用JSON文件存储。</p>\n<a id=\"more\"></a>\n\n\n\n<h1 id=\"基本的JSON结构体类型\">基本的JSON结构体类型<a href=\"coco-dataset-format#基本的JSON结构体类型\"></a></h1><p>object instances (目标实例)，object keypoints (目标上的关键点),，image captions (看图说话) 这3种类型共享这些基本类型：<code>info</code>、<code>image</code>、<code>license</code>。而 <code>annotation</code> 类型则呈现出多态。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"info\"</span>: info,</span><br><span class=\"line\">    <span class=\"attr\">\"licenses\"</span>: [license],</span><br><span class=\"line\">    <span class=\"attr\">\"images\"</span>: [image],</span><br><span class=\"line\">    <span class=\"attr\">\"annotations\"</span>: [annotation],</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">info&#123;</span><br><span class=\"line\">    \"year\": int,</span><br><span class=\"line\">    \"version\": str,</span><br><span class=\"line\">    \"description\": str,</span><br><span class=\"line\">    \"contributor\": str,</span><br><span class=\"line\">    \"url\": str,</span><br><span class=\"line\">    \"date_created\": datetime,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">license&#123;</span><br><span class=\"line\">    \"id\": int,</span><br><span class=\"line\">    \"name\": str,</span><br><span class=\"line\">    \"url\": str,</span><br><span class=\"line\">&#125; </span><br><span class=\"line\">image&#123;</span><br><span class=\"line\">    \"id\": int,</span><br><span class=\"line\">    \"width\": int,</span><br><span class=\"line\">    \"height\": int,</span><br><span class=\"line\">    \"file_name\": str,</span><br><span class=\"line\">    \"license\": int,</span><br><span class=\"line\">    \"flickr_url\": str,</span><br><span class=\"line\">    \"coco_url\": str,</span><br><span class=\"line\">    \"date_captured\": datetime,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<ol>\n<li><p><code>info</code> 类型，比如一个 <code>info</code> 类型的实例：</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">\"description\"</span>:<span class=\"string\">\"This is stable 1.0 version of the 2014 MS COCO dataset.\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"url\"</span>:<span class=\"string\">\"http:\\/\\/mscoco.org\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"version\"</span>:<span class=\"string\">\"1.0\"</span>,<span class=\"attr\">\"year\"</span>:<span class=\"number\">2014</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"contributor\"</span>:<span class=\"string\">\"Microsoft COCO group\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"date_created\"</span>:<span class=\"string\">\"2015-01-27 09:11:52.357475\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n</li>\n<li><p><code>images</code> 是包含多个 <code>image</code> 实例的数组，对于一个 <code>image</code> 类型的实例</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">\"license\"</span>:<span class=\"number\">3</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"file_name\"</span>:<span class=\"string\">\"COCO_val2014_000000391895.jpg\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"coco_url\"</span>:<span class=\"string\">\"http:\\/\\/mscoco.org\\/images\\/391895\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"height\"</span>:<span class=\"number\">360</span>,<span class=\"attr\">\"width\"</span>:<span class=\"number\">640</span>,<span class=\"attr\">\"date_captured\"</span>:<span class=\"string\">\"2013-11-14 11:18:45\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"flickr_url\"</span>:<span class=\"string\">\"http:\\/\\/farm9.staticflickr.com\\/8186\\/8119368305_4e622c8349_z.jpg\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"id\"</span>:<span class=\"number\">391895</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n</li>\n<li><p><code>licenses</code> 是包含多个 <code>license</code> 实例的数组，对于一个 <code>license</code> 类型的实例</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">\"url\"</span>:<span class=\"string\">\"http:\\/\\/creativecommons.org\\/licenses\\/by-nc-sa\\/2.0\\/\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"id\"</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"name\"</span>:<span class=\"string\">\"Attribution-NonCommercial-ShareAlike License\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n\n</li>\n</ol>\n<h1 id=\"Object-Instance-类型的标注格式\">Object Instance 类型的标注格式<a href=\"coco-dataset-format#Object-Instance-类型的标注格式\"></a></h1><h2 id=\"整体JSON文件格式\">整体JSON文件格式<a href=\"coco-dataset-format#整体JSON文件格式\"></a></h2><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"info\"</span>: info,</span><br><span class=\"line\">    <span class=\"attr\">\"licenses\"</span>: [license],</span><br><span class=\"line\">    <span class=\"attr\">\"images\"</span>: [image],</span><br><span class=\"line\">    <span class=\"attr\">\"annotations\"</span>: [annotation],</span><br><span class=\"line\">    <span class=\"attr\">\"categories\"</span>: [category]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p><code>info</code>, <code>licenses</code>, <code>image</code> 这三个结构体在不同的标注类型是统一的，只有 <code>annotation</code> 和 <code>category</code> 这两个结构体在不同类型的JSON文件中是不同的。</p>\n<ul>\n<li><code>images</code> 数组元素的数量等同于划入训练集（或者测试集）的图片的数量</li>\n<li><code>annotations</code> 数组元素的数量等同于训练集（或者测试集）中bounding box的数量</li>\n<li><code>categories</code> 数组元素的数量为分类类别的数量</li>\n</ul>\n<h2 id=\"annotations-字段\"><code>annotations</code> 字段<a href=\"coco-dataset-format#annotations-字段\"></a></h2><p><code>annotations</code> 字段是包含多个 <code>annotation</code> 实例的一个数组，<code>annotation</code> 类型本身又包含了一系列的字段，如这个目标的 <code>category id</code> 和 <code>segmentation mask</code> 。<code>segmentation</code> 格式取决于这个实例是一个单个的对象（即 <code>iscrowd=0</code>，将使用polygons格式）还是一组对象（即 <code>iscrowd=1</code>，将使用RLE格式）。如下所示：</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">annotation&#123;</span><br><span class=\"line\">    \"id\": int,    </span><br><span class=\"line\">    \"image_id\": int,</span><br><span class=\"line\">    \"category_id\": int,</span><br><span class=\"line\">    \"segmentation\": RLE or [polygon],</span><br><span class=\"line\">    \"area\": float,</span><br><span class=\"line\">    \"bbox\": [x,y,width,height],</span><br><span class=\"line\">    \"iscrowd\": 0 or 1,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<ul>\n<li><code>iscrowd=0</code> (单个对象) 时, <code>segmentation</code> 就是 <code>polygon</code> 格式，单个的对象可能需要多个<code>polygon</code>来表示，比如这个对象在图像中被挡住了。而<code>iscrowd=1</code>（将标注一组对象，比如一群人）时，<code>segmentation</code>使用的就是RLE格式。</li>\n<li><code>area</code> 是area of encoded masks，是标注区域的面积。如果是矩形框，那就是高乘宽；如果是<code>polygon</code>或者<code>RLE</code>，那就复杂点。</li>\n<li><code>categories</code> 字段存储的是当前对象所属的category的id，以及所属的supercategory的name。</li>\n</ul>\n<p><strong><code>polygon</code> 格式 <code>annotation</code> 示例：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">\"segmentation\"</span>: [[<span class=\"number\">510.66</span>,<span class=\"number\">423.01</span>,<span class=\"number\">511.72</span>,<span class=\"number\">420.03</span>,<span class=\"number\">510.45</span>......]],</span><br><span class=\"line\">\t<span class=\"attr\">\"area\"</span>: <span class=\"number\">702.1057499999998</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"iscrowd\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"image_id\"</span>: <span class=\"number\">289343</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"bbox\"</span>: [<span class=\"number\">473.07</span>,<span class=\"number\">395.93</span>,<span class=\"number\">38.65</span>,<span class=\"number\">28.67</span>],</span><br><span class=\"line\">\t<span class=\"attr\">\"category_id\"</span>: <span class=\"number\">18</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"id\"</span>: <span class=\"number\">1768</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<ul>\n<li><code>polygon</code> 格式比较简单，这些数按照相邻的顺序两两组成一个点的xy坐标，如果有n个数（必定是偶数），那么就是n/2个点坐标。</li>\n</ul>\n<p><strong><code>RLE</code> 格式 <code>annotation</code> 示例：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"segmentation\" : </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    u'counts': [272, 2, 4, 4, 4, 4, 2, 9, 1, 2, 16, 43, 143, 24......], </span><br><span class=\"line\">    u'size': [240, 320]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<ul>\n<li><code>RLE</code> (Run-length encoding)格式：对于一张图240x320的图片，共有76800个像素点，根据每个像素点在不在目标区域中，共有76800个bit；对于00000111100111110…，记录连续0和1的个数得到 [5,4,2,5,…]，这就是上文的 <code>counts</code> 数组。</li>\n<li><code>size</code> 为这个图片的宽和高</li>\n</ul>\n<h2 id=\"categories-字段\"><code>categories</code> 字段<a href=\"coco-dataset-format#categories-字段\"></a></h2><p><code>categories</code> 是一个包含多个 <code>category</code> 实例的数组，而 <code>category</code> 结构体描述如下：</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">category&#123;</span><br><span class=\"line\">    \"id\": int,</span><br><span class=\"line\">    \"name\": str,</span><br><span class=\"line\">    \"supercategory\": str,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p><strong>示例：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">\"supercategory\"</span>: <span class=\"string\">\"person\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"id\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"name\"</span>: <span class=\"string\">\"person\"</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">\"supercategory\"</span>: <span class=\"string\">\"vehicle\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"id\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"name\"</span>: <span class=\"string\">\"bicycle\"</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></div></figure>\n\n<h1 id=\"Object-Keypoint-类型的标注格式\">Object Keypoint 类型的标注格式<a href=\"coco-dataset-format#Object-Keypoint-类型的标注格式\"></a></h1><h2 id=\"整体JSON文件格式-1\">整体JSON文件格式<a href=\"coco-dataset-format#整体JSON文件格式-1\"></a></h2><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"info\"</span>: info,</span><br><span class=\"line\">    <span class=\"attr\">\"licenses\"</span>: [license],</span><br><span class=\"line\">    <span class=\"attr\">\"images\"</span>: [image],</span><br><span class=\"line\">    <span class=\"attr\">\"annotations\"</span>: [annotation],</span><br><span class=\"line\">    <span class=\"attr\">\"categories\"</span>: [category]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<ul>\n<li><code>images</code> 数组元素数量是划入训练集（测试集）的图片的数量</li>\n<li><code>annotations</code> 是bounding box的数量，在这里只有人这个类别的bounding box</li>\n<li><code>categories</code> 数组元素的数量为1，只有一个：person（2017年）</li>\n</ul>\n<h2 id=\"annotations-字段-1\"><code>annotations</code> 字段<a href=\"coco-dataset-format#annotations-字段-1\"></a></h2><p>这个类型中的 <code>annotation</code> 结构体包含了Object Instance中 <code>annotation</code> 结构体的所有字段，再加上2个额外的字段：<code>keypoints</code> 和 <code>num_keypoints</code>。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">annotation&#123;</span><br><span class=\"line\">    \"keypoints\": [x1,y1,v1,...],</span><br><span class=\"line\">    \"num_keypoints\": int,</span><br><span class=\"line\">    \"id\": int,</span><br><span class=\"line\">    \"image_id\": int,</span><br><span class=\"line\">    \"category_id\": int,</span><br><span class=\"line\">    \"segmentation\": RLE or [polygon],</span><br><span class=\"line\">    \"area\": float,</span><br><span class=\"line\">    \"bbox\": [x,y,width,height],</span><br><span class=\"line\">    \"iscrowd\": 0 or 1,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<ul>\n<li><code>keypoints</code> 是一个长度为3*k的数组，其中k是 <code>category</code> 中 <code>keypoints</code> 的总数量。每一个 <code>keypoint</code> 是一个长度为3的数组，第一和第二个元素分别是x和y坐标值，第三个元素是个标志位v，v为0时表示这个关键点没有标注（这种情况下x=y=v=0），v为1时表示这个关键点标注了但是不可见（被遮挡了），v为2时表示这个关键点标注了同时也可见</li>\n<li><code>num_keypoints</code> 表示这个目标上被标注的关键点的数量（v&gt;0），比较小的目标上可能就无法标注关键点</li>\n</ul>\n<p><strong>示例：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">\"segmentation\"</span>: [[<span class=\"number\">125.12</span>,<span class=\"number\">539.69</span>,<span class=\"number\">140.94</span>,<span class=\"number\">522.43</span>...]],</span><br><span class=\"line\">\t<span class=\"attr\">\"num_keypoints\"</span>: <span class=\"number\">10</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"area\"</span>: <span class=\"number\">47803.27955</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"iscrowd\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"keypoints\"</span>: [<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">142</span>,<span class=\"number\">309</span>,<span class=\"number\">1</span>,<span class=\"number\">177</span>,<span class=\"number\">320</span>,<span class=\"number\">2</span>,<span class=\"number\">191</span>,<span class=\"number\">398.</span>..],</span><br><span class=\"line\">\t<span class=\"attr\">\"image_id\"</span>: <span class=\"number\">425226</span>,<span class=\"attr\">\"bbox\"</span>: [<span class=\"number\">73.35</span>,<span class=\"number\">206.02</span>,<span class=\"number\">300.58</span>,<span class=\"number\">372.5</span>],<span class=\"attr\">\"category_id\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"id\"</span>: <span class=\"number\">183126</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"categories-字段-1\"><code>categories</code> 字段<a href=\"coco-dataset-format#categories-字段-1\"></a></h2><p>对于每一个 <code>category</code> 结构体，相比Object Instance中的 <code>category</code> 新增了2个额外的字段。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">category&#123;</span><br><span class=\"line\">    \"id\": int,</span><br><span class=\"line\">    \"name\": str,</span><br><span class=\"line\">    \"supercategory\": str,</span><br><span class=\"line\">    \"keypoints\": [str],</span><br><span class=\"line\">    \"skeleton\": [edge]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<ul>\n<li><code>keypoints</code> 是一个长度为k的数组，包含了每个关键点的名字</li>\n<li><code>skeleton</code> 定义了各个关键点之间的连接性（比如人的左手腕和左肘就是连接的，但是左手腕和右手腕就不是）。目前，COCO的keypoints只标注了person category （分类为人）。</li>\n</ul>\n<p><strong>示例：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">\"supercategory\"</span>: <span class=\"string\">\"person\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"id\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"name\"</span>: <span class=\"string\">\"person\"</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"keypoints\"</span>: [<span class=\"string\">\"nose\"</span>,<span class=\"string\">\"left_eye\"</span>,<span class=\"string\">\"right_eye\"</span>,<span class=\"string\">\"left_ear\"</span>,<span class=\"string\">\"right_ear\"</span>,<span class=\"string\">\"left_shoulder\"</span>,<span class=\"string\">\"right_shoulder\"</span>,<span class=\"string\">\"left_elbow\"</span>,<span class=\"string\">\"right_elbow\"</span>,<span class=\"string\">\"left_wrist\"</span>,<span class=\"string\">\"right_wrist\"</span>,<span class=\"string\">\"left_hip\"</span>,<span class=\"string\">\"right_hip\"</span>,<span class=\"string\">\"left_knee\"</span>,<span class=\"string\">\"right_knee\"</span>,<span class=\"string\">\"left_ankle\"</span>,<span class=\"string\">\"right_ankle\"</span>],</span><br><span class=\"line\">\t<span class=\"attr\">\"skeleton\"</span>: [[<span class=\"number\">16</span>,<span class=\"number\">14</span>],[<span class=\"number\">14</span>,<span class=\"number\">12</span>],[<span class=\"number\">17</span>,<span class=\"number\">15</span>],[<span class=\"number\">15</span>,<span class=\"number\">13</span>],[<span class=\"number\">12</span>,<span class=\"number\">13</span>],[<span class=\"number\">6</span>,<span class=\"number\">12</span>],[<span class=\"number\">7</span>,<span class=\"number\">13</span>],[<span class=\"number\">6</span>,<span class=\"number\">7</span>],[<span class=\"number\">6</span>,<span class=\"number\">8</span>],[<span class=\"number\">7</span>,<span class=\"number\">9</span>],[<span class=\"number\">8</span>,<span class=\"number\">10</span>],[<span class=\"number\">9</span>,<span class=\"number\">11</span>],[<span class=\"number\">2</span>,<span class=\"number\">3</span>],[<span class=\"number\">1</span>,<span class=\"number\">2</span>],[<span class=\"number\">1</span>,<span class=\"number\">3</span>],[<span class=\"number\">2</span>,<span class=\"number\">4</span>],[<span class=\"number\">3</span>,<span class=\"number\">5</span>],[<span class=\"number\">4</span>,<span class=\"number\">6</span>],[<span class=\"number\">5</span>,<span class=\"number\">7</span>]]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h1 id=\"Image-Caption-类型的标注格式\">Image Caption 类型的标注格式<a href=\"coco-dataset-format#Image-Caption-类型的标注格式\"></a></h1><h2 id=\"整体JSON文件格式-2\">整体JSON文件格式<a href=\"coco-dataset-format#整体JSON文件格式-2\"></a></h2><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"info\"</span>: info,</span><br><span class=\"line\">    <span class=\"attr\">\"licenses\"</span>: [license],</span><br><span class=\"line\">    <span class=\"attr\">\"images\"</span>: [image],</span><br><span class=\"line\">    <span class=\"attr\">\"annotations\"</span>: [annotation]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<ul>\n<li><code>images</code> 数组的元素数量等于划入训练集（或者测试集）的图片的数量</li>\n<li><code>annotations</code> 的数量要多于图片的数量，这是因为一个图片可以有多个场景描述；</li>\n</ul>\n<h2 id=\"annotations-字段-2\"><code>annotations</code> 字段<a href=\"coco-dataset-format#annotations-字段-2\"></a></h2><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">annotation&#123;</span><br><span class=\"line\">    \"id\": int,</span><br><span class=\"line\">    \"image_id\": int,</span><br><span class=\"line\">    \"caption\": str</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p><strong>示例：</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">\"image_id\"</span>: <span class=\"number\">179765</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"id\"</span>: <span class=\"number\">38</span>,</span><br><span class=\"line\">\t<span class=\"attr\">\"caption\"</span>: <span class=\"string\">\"A black Honda motorcycle parked in front of a garage.\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h1 id=\"参考资料\">参考资料<a href=\"coco-dataset-format#参考资料\"></a></h1><ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/29393415\" target=\"_blank\" rel=\"noopener\">COCO数据集的标注格式</a></li>\n</ul>\n","prev":{"title":"PASCAL VOC 数据集格式","link":"pascal-voc-dataset-format"},"next":{"title":"Windows上安装pycocotools报错","link":"windows-pycocotools"},"plink":"https://yuxinzhao.net/coco-dataset-format/","toc":[{"title":"基本的JSON结构体类型","id":"基本的JSON结构体类型","index":"1"},{"title":"Object Instance 类型的标注格式","id":"Object-Instance-类型的标注格式","index":"2","children":[{"title":"整体JSON文件格式","id":"整体JSON文件格式","index":"2.1"},{"title":"<code>annotations</code> 字段","id":"annotations-字段","index":"2.2"},{"title":"<code>categories</code> 字段","id":"categories-字段","index":"2.3"}]},{"title":"Object Keypoint 类型的标注格式","id":"Object-Keypoint-类型的标注格式","index":"3","children":[{"title":"整体JSON文件格式","id":"整体JSON文件格式-1","index":"3.1"},{"title":"<code>annotations</code> 字段","id":"annotations-字段-1","index":"3.2"},{"title":"<code>categories</code> 字段","id":"categories-字段-1","index":"3.3"}]},{"title":"Image Caption 类型的标注格式","id":"Image-Caption-类型的标注格式","index":"4","children":[{"title":"整体JSON文件格式","id":"整体JSON文件格式-2","index":"4.1"},{"title":"<code>annotations</code> 字段","id":"annotations-字段-2","index":"4.2"}]},{"title":"参考资料","id":"参考资料","index":"5"}],"reward":true,"copyright":{"author":"Yuxin Zhao","link":"<a href=\"https://yuxinzhao.net/coco-dataset-format/\" title=\"COCO数据集格式\">https://yuxinzhao.net/coco-dataset-format/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}