{"title":"git clone 克隆大项目时发生error RPC failed","date":"2020-03-07T03:47:56.000Z","thumbnail":"git-clone-error-RPC-failed/logo.jpg","link":"git-clone-error-RPC-failed","comments":true,"tags":["error","git"],"categories":["tools"],"updated":"2022-01-04T08:35:48.591Z","content":"<p>本文介绍如何解决 git 在克隆较大项目时容易发生的错误 <code>error: RPC failed</code>。</p>\n<a id=\"more\"></a>\n\n<h2 id=\"错误内容\">错误内容<a href=\"git-clone-error-RPC-failed#错误内容\"></a></h2><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">error: RPC failed; curl 18 transfer closed with 31812496 bytes remaining to read</span><br><span class=\"line\">fatal: The remote end hung up unexpectedly</span><br><span class=\"line\">fatal: early EOF</span><br><span class=\"line\">fatal: index-pack failed</span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"解决方法\">解决方法<a href=\"git-clone-error-RPC-failed#解决方法\"></a></h2><p>通常我们从github克隆是采用https的方式，即</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span> git clone https://github.com/&lt;user-name&gt;/&lt;repo-name&gt;.git</span><br></pre></td></tr></table></div></figure>\n\n<p>这种方式克隆时会有一个buffer的上限，超过此上限时就会报错。</p>\n<p>通过使用ssh方式进行克隆可以解决这个问题。</p>\n<ol>\n<li><p>在本机上生成一个新的SSH密钥。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span> ssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"</span><br><span class=\"line\">Enter file in which to save the key (~/.ssh/id_rsa): #存储密钥的路径，直接Enter</span><br><span class=\"line\">Enter passphrase (empty for no passphrase): # 密码，可设定可不设定，设定后每次上传和下载都需要输入密码</span><br><span class=\"line\">Enter same passphrase again:  # 再输入一次密码</span><br></pre></td></tr></table></div></figure>\n\n<p>到密钥存储的位置可以查看密钥:</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span> cat ~/.ssh/id_rsa.pub</span><br><span class=\"line\">ssh-rsa 一长串密钥 you_email@example.com</span><br></pre></td></tr></table></div></figure>\n</li>\n<li><p>在github上添加生成的密钥。</p>\n<p>在github的 settings &gt; SSH and GPG keys 页面下添加新的ssh key，密钥内容为<code>id_rsa.pub</code>的全部内容，包含开头的<code>ssh-rsa</code>和结尾的邮箱地址。</p>\n</li>\n<li><p>采用ssh方式进行clone。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span> git clone git@github.com:&lt;user-name&gt;/&lt;repo-name&gt;.git</span><br></pre></td></tr></table></div></figure>\n\n</li>\n</ol>\n","prev":{"title":"GitHub Action自动化部署hexo博客到GitHub Page和Coding Page","link":"github-action-auto-deploy-hexo"},"next":{"title":"easycore多GPU并行加速","link":"easycore-parallel-multi-gpu"},"plink":"https://yuxinzhao.net/git-clone-error-RPC-failed/","toc":[{"title":"错误内容","id":"错误内容","index":"1"},{"title":"解决方法","id":"解决方法","index":"2"}],"reward":true,"copyright":{"author":"Yuxin Zhao","link":"<a href=\"https://yuxinzhao.net/git-clone-error-RPC-failed/\" title=\"git clone 克隆大项目时发生error RPC failed\">https://yuxinzhao.net/git-clone-error-RPC-failed/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}